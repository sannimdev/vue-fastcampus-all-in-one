<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- 개발버전, 도움되는 콘솔 경고를 포함. -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- vm의 자식 컴포넌트 -->
      <my-comp :my-msg="message" v-on:my-event="updateMessage"></my-comp>
    </div>
    <script>
      /*
        부모가 자식에게 ▶  Props
        자식이 부모에게 ▶  emit
        사실, 자식이 부모에게 데이터를 줄 수 있는 것은 기본적으로는 허용되지 않는다.
        그러나 필요에 따라 자식이 수정한 데이터를 부모에게 영향을 미쳐야 하는 경우에는 emit을 이용한다.
      */
      Vue.component('my-comp', {
        template: '<div @click="updateMsg">{{myMsg}}</div>',
        props: {
          myMsg: String,
        },
        methods: {
          updateMsg() {
            //자식컴포넌트를 통해서 값을 변경시키는 것은 경고를 발생시킬 뿐 아니라 다양한 문제를 내포하고 있으므로 이 방법의 사용을 지양한다.
            // Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: "myMsg"
            // this.myMsg = 'Good';

            //$emit메서드를 이용하여 부모에게 이벤트를 전달해 준다.
            this.$emit('my-event', '전달할 인수');
          },
        },
      });
      const vm = new Vue({
        //부모 컴포넌트
        el: '#app',
        data() {
          return {
            message: 'Hello',
          };
        },
        methods: {
          updateMessage(value) {
            //자식컴포넌트에서 이벤트를 통해 받은 값을 이용하여 부모 컴포넌트에서 값을 변경한다.
            this.message = value;
          },
        },
      });
    </script>
  </body>
</html>
